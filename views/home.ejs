<%- include('partials/head') %>
<div class="container">
	<a class="logout-btn" href="/logout">Logout</a>
	<h1>Welcome, <%= user.username %>!</h1>
	<p>Ready to play chess?</p>
	<p class="error"><%- message %></p>
	<form action="/createRoom" method="POST">
		<button type="submit" id="createRoomBtn">Create a Room</button>
	</form>
	<!-- The Modal -->

	<button id="joinRoomBtn">Join a Room</button>
	<div id="joinRoomModal" class="modal">
		<!-- Modal content -->
		<div class="modal-content">
			<span class="close">&times;</span>
			<p>Type the room code and join</p>
			<input type="text" placeholder="Room code" name="roomCode" id="roomCode" />
			<button type="submit" onclick="redirectToRoom()">Join</button>
		</div>
	</div>

	<!-- Additional features can be added here -->
</div>

<script>
	function redirectToRoom() {
		const roomCode = document.getElementById("roomCode").value;

		var baseUrl = window.location.protocol + "//" + window.location.host;
		window.location.href = `${baseUrl}/room/${roomCode}`;
		if (roomCode.trim() !== "") {
			window.location.href = `/room/${roomCode}`;
		} else {
			alert("Please enter a valid room code.");
		}
	}
	// Get the modal
	var modal = document.getElementById("joinRoomModal");

	// Get the button that opens the modal
	var btn = document.getElementById("joinRoomBtn");

	// Get the <span> element that closes the modal
	var span = document.getElementsByClassName("close")[0];

	// When the user clicks on the button, open the modal
	btn.onclick = function () {
		modal.style.display = "block";
	};

	// When the user clicks on <span> (x), close the modal
	span.onclick = function () {
		modal.style.display = "none";
	};

	// When the user clicks anywhere outside of the modal, close it
	window.onclick = function (event) {
		if (event.target == modal) {
			modal.style.display = "none";
		}
	};
	function createRoom() {
		// Add logic to create a new chess room
		alert("Creating a new room...");
	}

	function joinRoom() {
		// Add logic to join an existing chess room
		alert("Joining a room...");
	}
</script>
<%- include('partials/foot') %>
